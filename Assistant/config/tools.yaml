# Tool Registry - Declarative catalog of tools and capabilities

tools:
  - tool_id: amazon_ads_api
    kind: api
    description: Amazon Ads API for SP/SB/SD campaigns
    capabilities:
      - name: get_campaign_metrics
        description: Fetch campaign metrics (spend, clicks, impressions, etc.)
        inputs_schema_ref: "#/schemas/adsQuery"
        metrics:
          - spend
          - clicks
          - impressions
          - ctr
          - cpc
          - roas
          - acos
          - orders
          - sales
        channels:
          - SP
          - SB
          - SD
    auth: oAuth2:amazon_ads
    quotas:
      rpm: 30
      burst: 100
    latency_hint_ms: 600
    retries:
      max: 2
      backoff: exp
    observability_tags:
      - ads
      - amazon

  - tool_id: sales_db
    kind: sql
    description: Sales warehouse database
    connection_ref: warehouse.primary
    schemas:
      - public.shopify_orders
      - public.shopify_order_line_items
      - public.shopify_product_variants
      - public.customer_details_th
      - public.product_variant_cost_history
    join_keys:
      - left: order_id
        right: order_id
      - left: variant_id
        right: variant_id
    rls:
      region_scope_from_user_claim: true
    quotas:
      max_result_rows: 200000
    observability_tags:
      - sales
      - warehouse

  - tool_id: meta_ads_db
    kind: sql
    description: Meta Ads attribution data
    connection_ref: warehouse.primary
    schemas:
      - public.dw_meta_ads_attribution
      - public.ads_insights_hourly
    join_keys:
      - left: campaign_id
        right: campaign_id
    rls:
      region_scope_from_user_claim: false
    quotas:
      max_result_rows: 200000
    observability_tags:
      - ads
      - meta

  - tool_id: google_ads_db
    kind: sql
    description: Google Ads attribution data
    connection_ref: warehouse.primary
    schemas:
      - public.dw_google_ads_attribution
      - public.gads_hourly_pmax_campaign_metrics
    join_keys:
      - left: campaign_id
        right: campaign_id
    rls:
      region_scope_from_user_claim: false
    quotas:
      max_result_rows: 200000
    observability_tags:
      - ads
      - google

  - tool_id: organic_db
    kind: sql
    description: Organic attribution data
    connection_ref: warehouse.primary
    schemas:
      - public.dw_organic_attribution
    quotas:
      max_result_rows: 200000
    observability_tags:
      - organic
      - attribution

  - tool_id: amazon_ads_db
    kind: sql
    description: Amazon Ads product metrics from database
    connection_ref: warehouse.primary
    schemas:
      - public.amazon_product_metrics_daily
    quotas:
      max_result_rows: 200000
    observability_tags:
      - ads
      - amazon
      - products

  - tool_id: compute
    kind: compute
    description: Metric computation and aggregation engine
    capabilities:
      - name: aggregate
        description: Aggregate data from multiple sources
        metrics:
          - roas
          - ctr
          - cpc
          - acos
          - ltv
          - aov
      - name: join
        description: Join data from multiple sources
      - name: calculate
        description: Calculate derived metrics
    quotas:
      max_input_rows: 1000000
    observability_tags:
      - computation
      - aggregation

